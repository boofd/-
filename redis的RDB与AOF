RDB介绍
Redis数据文件，数据持久化方式之一
数据持久化默认方式
按照指定时间间隔，将内存中的数据集快照写入硬盘
快照术语叫Snapshot
恢复时，将快照文件直接读入内存

RBD文件名：/var/lib/redis/6379/dump.rdb

RDB优点：高性能的持久化实现－创建一个子进程来执行持久化，先将数据写入临时文件，持久化过程结束后，在用这个临时文件替换上次持久化好的文件；过程中主进程不做任何IO操作
	比较适合大规模数据恢复，且对数据完整性要求不是很高的场合

RDB缺点：意外宕机时，丢失最后一次持久化的所有数据

数据从内存保存到硬盘的频率　vim +219 /etc/redis/6379.conf
			save 900 1	900秒内且有一个变量改变往硬盘存储一次
			save 300 10	300秒内且有10个变量改变往硬盘存储一次
			save 60 10000	60秒内有一万个变量改变网硬盘存储一次 wq
手动存盘：
	save	阻塞写存盘	存盘时拒绝客户端写操作
	bgsave	不阻塞写存盘	存盘时客户端可以正常写操作

使用RDB文件恢复数据　
两台服务器：　192.168.4.51	192.168.4.52
51号：　scp /var/lib/redis/6379/dump.rdb root@192.168.4.52:/root
52号	redis-cli -h 192.168.4.52 -p 6352 shutdown 
	rm -rf /var/lib/redis/6379/* ##一定要先停止数据库，再删除数据库目录内容，因为redis数据库停止服务会进行自动备份，覆盖当前现有的数据库文件内容，所有先停服务再删除数据库内容

52号：	mv /root/dump.rdb /var/lib/redis/6379/ ##将51号发送过来的备份数据移至本机数据库目录下
	/etc/init.d/6379.conf start ##重启服务会读rdb文件，完成恢复数据

AOF介绍
追加方式记录写操作的文件
记录redis服务所有写操作
不断的将新的写操作，追加到文件的末尾
默认没有启用
使用cat命令可以查看文件内容

AOF优点
	可以灵活设置持久化方式
	出现意外宕机时，仅丢失一秒的数据
AOF缺点
	持久化文件体积通常会大于RDB方式
	吃行fsync策略时的速度可能会比RDB方式慢
启用AOF
	redis-cli -h 192.168.4.51 -p 6351 #进入数据库
	config set appendonly yes 	　#命令行设置启用文件
51号：	scp /var/lib/redis/6379/appendonly.aof root@192.168.4.52:/root
52号：	redis-cli -h 192.168.4.52 -p 6352 shutdown #关闭服务
52号：	mv /root/appendonly.cof /var/lib/redis/6379 ＃将备份文件移至数据库目录下
52号：	/etc/init.d/6379.conf start ＃重启服务区完成数据恢复

