openstack七大组件
	Horizon
	用于管理openstack各种服务的.基于web的管理接口通过图形界面创建用户,管理网络.启动实例等操作
	Kyestone
	为其他服务提供认证和授权的集中身份管理服务
	Neutron
	一种软件定义网络服务
	用于创建网络.子网,路由器.管理浮动ip地址
	Cinder
	为虚拟机管理存储卷的服务
	为运行在nova中的实例提供永久的块存储
	Glance
	扮演虚拟机镜像注册的角色
	允许用户为直接存储拷贝服务器镜像
	这些镜像可以用于新建虚拟机的模板
	Nova	
	在节点上用于管理虚拟机的服务
	Quantum

准备虚拟机三台.配置以下
	openstack管理主机	2cpu 6G内存 50G硬盘
	静态ip		192.168.1.10
	nova01,nova02计算机节点*2
	2cpu,4.5G内存,100G硬盘
	配置静态ip	192.168.1.11,192.168.1.12

系统环境准备
1.	配置DNS	# 三台机器都需要同步配置
	openstack安装时候需要使用外部dns解析域名
	vim /etc/resolv.conf
; generated by /usr/sbin/dhclient-script
#search localhost
nameserver 192.168.1.254	注释掉search开头的所有行

	配置ip对应的解析	#三台机器都需要同步配置
	vim /etc/hosts
	192.168.1.10 openstack
	192.168.1.11 nova01
	192.168.1.12 nova02

2.	配置NTP时间服务
	nova服务器之间的时间必须保持一致
	vim /etc/chrony.conf #三台机器需要同步配置
	server 192.168.1.254 iburst
	systemctl restart chronyd	重启服务

3.	配置yum仓库
	Centos7-1804.iso	系统软件
	RHEL7-extras.iso	提供python依赖软件包
	RHEL7OSP-10.iso		光盘拥有众多目录,每个目录都是一个软件仓库,我们配置其中两个软件仓库
	真机将三张光盘全部挂在ftp
	mkdir /var/ftp/centos
	mount CENTOS7-1804.iso /var/ftp/centos-1804
	mkdir /var/ftp/extras
	mount RHEL7-extras.iso /var/ftp/extras
	mkdir /var/ftp/openstack
	mount RHEL7OSP-10.iso /var/ftp/openstack
	
	配置三台虚拟机的yum源	# 三台机器都要同步配置
	vim /etc/yum.repo.d/loca.repo
[local_repo]
name=CentOS-$releasever - Base
baseurl="ftp://192.168.1.254/centos-1804"
enabled=1
gpgcheck=0
[extras]
name=extras
baseurl="ftp://192.168.1.254/extras"
enabled=1
gpgcheck=0
[pack]
name=pack
baseurl="ftp://192.168.1.254/openstack/rhel-7-server-openstack-10-rpms"
enabled=1
gpgcheck=0
[dev]
name=dev
baseurl="ftp://192.168.1.254/openstack/rhel-7-server-openstack-10-devtools-rpms"
enabled=1
gpgcheck=0
wq	保存退出
	yum repolist 显示10670个包配置成功,三台同步配置

4.安装软件包
	nova01,nova02:
	yum -y install qemu-kvm libvirt-daemo libvirt-daemo-driver-qemu libvirt-client python-setuptools
	openstack:
	yum -y install python-setuptools

5.	配置packstack
 	安装openstack需要使用packstack
	openstack:	yum -y install openstack-packstack
	使用packstack创建应答文件
	packstack --gen-answer-file=answer.ini

	修改应答文件	vim answer.ini
		42  CONFIG_SWIFT_INSTALL=n
45  CONFIG_CEILOMETER_INSTALL=n                   //计费相关模块
49  CONFIG_AODH_INSTALL=n                         //计费相关模块
53  CONFIG_GNOCCHI_INSTALL=n                     //计费相关模块
75  CONFIG_NTP_SERVERS=192.168.1.254   //时间服务器的地址
98  CONFIG_COMPUTE_HOSTS=192.168.1.11,192.168.1.12#哪台主机需要安装后nova组件
102 CONFIG_NETWORK_HOSTS=192.168.1.10,192.168.1.11,192.168.1.12#哪台主机需要配置网络
 333 CONFIG_KEYSTONE_ADMIN_PW=a     //修改管理员的密码
840 CONFIG_NEUTRON_ML2_TYPE_DRIVERS=flat,vxlan   //驱动类型
 876 CONFIG_NEUTRON_ML2_VXLAN_GROUP=239.1.1.5  
//设置组播地址,最后一个随意不能为0和255,其他固定
 910 CONFIG_NEUTRON_OVS_BRIDGE_MAPPINGS=physnet1:br-ex  //物理网桥的名称
 921 CONFIG_NEUTRON_OVS_BRIDGE_IFACES=br-ex:eth0   
//br-ex桥的名称与eth0连接，管理eth0,网桥与哪个物理网卡连接
1179 CONFIG_PROVISION_DEMO=n   //DEMO是否测试

部署openstack
	packstack --answer-file=answer.ini

	#如果出现初五,根据屏幕上给出的日志文件进行排错
	#问题基本出在基础环境,查看步骤
	是否卸载firewalld和networkmanager
	检查配置主机网络ip
	主机名之间必须可以相互ping通
	检查配置主机yum源(10670个)
	依赖软件包是否安装
	检查NTP服务器是否可用
	检查/etc/resolv.conf不能有search开头的行

